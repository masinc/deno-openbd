# OpenBD API 仕様調査結果

## 概要

OpenBD（Open Bibliography
Data）は、日本国内で流通する書籍の書誌情報・書影を無料で提供するWebAPIサービスです。

- 開発者: Calil および Hanmoto.com
- 収録タイトル: 約760,000タイトル
- 出版社: 24,747社
- 応答速度: 1ms/書籍レコード

## APIエンドポイント

### 基本URL

```
https://api.openbd.jp/v1/
```

### 利用可能なエンドポイント

#### 1. `/get` - 書誌情報取得

```
GET /v1/get?isbn={ISBN}[,{ISBN}...]
```

**パラメータ:**

- `isbn`: ISBN-10またはISBN-13（カンマ区切りで複数指定可能）

**レスポンス:**

- 配列形式のJSON
- 各要素は書籍情報オブジェクトまたは`null`（該当書籍なしの場合）

#### 2. `/coverage` - 収録範囲取得

```
GET /v1/coverage
```

#### 3. `/schema` - JSONスキーマ取得

```
GET /v1/schema
```

## レスポンス構造

### 成功時のレスポンス

```json
[
  {
    "summary": {
      "isbn": "9784101092058",
      "title": "新編銀河鉄道の夜",
      "volume": "",
      "series": "新潮文庫",
      "publisher": "新潮社",
      "pubdate": "199211",
      "cover": "",
      "author": "宮沢,賢治,1896-1933"
    },
    "onix": {
      // ONIX形式の詳細データ
    },
    "hanmoto": {
      // Hanmoto.com形式の追加データ
    }
  }
]
```

### エラー時のレスポンス

- 該当書籍が見つからない場合: `[null]`
- 複数ISBN指定時: 該当なしの部分は`null`

## データ構造詳細

### summary フィールド

基本的な書籍情報（必須フィールド）:

- `isbn`: ISBN-13
- `title`: 書籍タイトル
- `volume`: 巻数
- `series`: シリーズ名
- `publisher`: 出版社名
- `pubdate`: 出版日（YYYYMM形式）
- `cover`: 書影URL
- `author`: 著者名

### onix フィールド

JPRO-onix準拠の詳細書誌データ:

- `DescriptiveDetail`: 書誌詳細情報
- `CollateralDetail`: 関連情報
- `PublishingDetail`: 出版情報
- `ProductSupply`: 供給情報

### hanmoto フィールド

Hanmoto.com由来の追加データ:

- 出版社からの詳細情報
- 販売情報
- その他の補足データ

## 利用制限・注意事項

1. **利用目的**: 書籍の紹介・宣伝目的に限定
2. **データ改変**: 取得したデータの改変は禁止
3. **データ更新**:
   新刊情報は変更・削除される可能性があるため、定期的な更新を推奨
4. **レート制限**: 明示的な制限は不明（要確認）

## エラーハンドリング

- HTTPステータスコード200でも該当書籍がない場合は`null`が返される
- ネットワークエラーやサーバーエラーは通常のHTTPエラーコードで返される

## 実装時の考慮事項

1. **バッチ処理**: 複数ISBNを一度に取得可能
2. **キャッシュ**: 頻繁に更新される可能性があるため、適切なキャッシュ戦略が必要
3. **型安全性**: レスポンス構造が複雑なため、Zodによる厳密な検証が重要
4. **エラー処理**: `null`レスポンスの適切な処理が必要

## 今後の調査項目

- [ ] レート制限の詳細
- [ ] 大量リクエスト時の動作
- [ ] 書影取得の詳細仕様
- [ ] 更新頻度とキャッシュ戦略
